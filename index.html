<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wang Weize | Imperial Mandarin Authority - SUPREME AI EDITION</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@700;900&family=Playfair+Display:wght@900&family=Cormorant+Garamond:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root { --imperial-red: #C41E3A; --emperor-gold: #FFD700; --rice-paper: #FDF6E3; }
        body { background-color: var(--rice-paper); color: #1a1a1a; font-family: 'Noto Serif SC', serif; background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png'); overflow-x: hidden; padding-bottom: 120px; }
        
        .emperor-name { font-family: 'Playfair Display', serif; font-size: clamp(3rem, 8vw, 6.5rem); font-weight: 900; color: #ffffff; -webkit-text-stroke: 2.5px var(--imperial-red); text-shadow: 4px 4px 0 var(--emperor-gold), 8px 8px 20px rgba(0,0,0,0.5); letter-spacing: 6px; display: inline-block; line-height: 1.2; padding: 15px; filter: drop-shadow(0 5px 15px rgba(196,30,58,0.4)); }
        .glass-scroll { background: rgba(253, 246, 227, 0.95); backdrop-filter: blur(10px); border: 3px solid var(--imperial-red); border-radius: 12px; transition: 0.5s; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .hidden-tab { display: none !important; }
        .active-nav { background: var(--imperial-red) !important; color: var(--emperor-gold) !important; transform: scale(1.05); box-shadow: 0 -5px 15px rgba(196,30,58,0.5); }
        
        canvas { touch-action: none; cursor: crosshair; }
        .canvas-box { position: relative; width: 320px; height: 320px; margin: 0 auto; background: #fff; border: 6px double var(--imperial-red); border-radius: 10px; }
        
        .imperial-particle { position: fixed; top: -10px; pointer-events: none; z-index: 0; opacity: 0.15; animation: fall linear infinite; font-size: 24px; color: var(--emperor-gold); }
        @keyframes fall { to { transform: translateY(100vh) rotate(360deg); } }

        .vocab-card { background: white; border: 2px solid var(--imperial-red); border-radius: 16px; padding: 20px; box-shadow: 6px 6px 0 var(--imperial-red); transition: 0.3s; }
        .vocab-hanzi { font-size: 42px; font-family: 'Ma Shan Zheng', cursive; color: var(--imperial-red); text-shadow: 1px 1px 0 var(--emperor-gold); }
        .vocab-btn { width: 42px; height: 42px; border-radius: 50%; border: 2px solid var(--imperial-red); background: var(--emperor-gold); color: var(--imperial-red); transition: 0.2s; display: flex; align-items: center; justify-content: center; font-size: 20px; }
        
        .stat-card { background: linear-gradient(135deg, #fff 0%, #f8f8f8 100%); border: 2px solid var(--imperial-red); border-radius: 15px; padding: 20px; text-align: center; }
        .flashcard { perspective: 1000px; height: 300px; cursor: pointer; }
        .flashcard-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .flashcard.flipped .flashcard-inner { transform: rotateY(180deg); }
        .flashcard-front, .flashcard-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 48px; font-weight: bold; text-align: center; }
        .flashcard-front { background: linear-gradient(135deg, var(--imperial-red), #8B0000); color: white; }
        .flashcard-back { background: linear-gradient(135deg, var(--emperor-gold), #DAA520); color: var(--imperial-red); transform: rotateY(180deg); }
        
        #chat-window { height: 400px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; padding: 15px; background: rgba(255,255,255,0.5); border-radius: 15px; border: 2px inset var(--imperial-red); }
        .msg { max-width: 80%; padding: 10px 15px; border-radius: 15px; font-weight: bold; font-size: 14px; }
        .msg-user { align-self: flex-end; background: var(--imperial-red); color: white; border-bottom-right-radius: 2px; }
        .msg-ai { align-self: flex-start; background: var(--emperor-gold); color: var(--imperial-red); border-bottom-left-radius: 2px; box-shadow: 3px 3px 0 var(--imperial-red); }
        
        .streak-day { width: 25px; height: 25px; border-radius: 4px; display: inline-block; margin: 2px; }
        .streak-complete { background: var(--emperor-gold); }
        .streak-incomplete { background: #e5e5e5; }
    </style>
</head>
<body>
    <div id="particle-container"></div>
    <div id="achievementContainer"></div>

    <header class="p-10 text-center relative z-10">
        <p class="text-[12px] tracking-[0.5em] font-black text-red-800 uppercase mb-4">Native Shaanxi ‚Ä¢ Medan Pancing Soul ‚Ä¢ DeepSeek AI Power</p>
        <h1 class="emperor-name">WANG WEIZE</h1>
        
        <div class="mt-8 grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto">
            <div class="stat-card">
                <div class="text-3xl font-black text-red-900" id="totalWords">0</div>
                <div class="text-xs uppercase font-bold">Kata Dikuasai</div>
            </div>
            <div class="stat-card">
                <div class="text-3xl font-black text-red-900" id="studyStreak">0</div>
                <div class="text-xs uppercase font-bold">üî• Streak</div>
            </div>
            <div class="stat-card">
                <div class="text-3xl font-black text-red-900" id="totalXP">0</div>
                <div class="text-xs uppercase font-bold">Total XP</div>
            </div>
            <div class="stat-card">
                <div class="text-2xl font-black text-red-900" id="userLevel">Lv 1</div>
                <div class="text-xs uppercase font-bold">Rank Sultan</div>
            </div>
        </div>
    </header>

    <nav class="fixed bottom-0 w-full z-40 flex justify-center gap-2 p-3 bg-[#1a1a1a] border-t-4 border-yellow-500 overflow-x-auto shadow-2xl whitespace-nowrap">
        <button onclick="tab('home')" id="n-home" class="px-4 py-2 bg-white text-red-900 font-black text-xs rounded active-nav">HOME</button>
        <button onclick="tab('dasar')" id="n-dasar" class="px-4 py-2 bg-white text-red-900 font-black text-xs rounded">TULIS ‚úçÔ∏è</button>
        <button onclick="tab('kamus')" id="n-kamus" class="px-4 py-2 bg-white text-red-900 font-black text-xs rounded">KAMUS üéôÔ∏è</button>
        <button onclick="tab('flashcard')" id="n-flashcard" class="px-4 py-2 bg-white text-red-900 font-black text-xs rounded">KARTU üé¥</button>
        <button onclick="tab('quiz')" id="n-quiz" class="px-4 py-2 bg-white text-red-900 font-black text-xs rounded">QUIZ üéØ</button>
        <button onclick="tab('ai-chat')" id="n-ai-chat" class="px-4 py-2 bg-white text-red-900 font-black text-xs rounded">CHAT AI ü§ñ</button>
        <button onclick="tab('progress')" id="n-progress" class="px-4 py-2 bg-white text-red-900 font-black text-xs rounded">STATS üìä</button>
    </nav>

    <main class="max-w-5xl mx-auto p-4 md:p-8 space-y-10 relative z-10">
        <div id="home" class="tab-content text-center">
            <div class="glass-scroll p-12">
                <h2 class="text-4xl font-black text-red-900 mb-4 uppercase">Imperial Dashboard</h2>
                <p class="text-lg font-bold italic border-l-4 border-yellow-500 pl-4 bg-white/60 p-4 rounded mb-6">
                    "Belajar Mandarin kaga pake scam, isinya daging semua biar lu kaga Boncos! üöÄ"
                </p>
                <div class="grid md:grid-cols-2 gap-4 text-left">
                    <div class="bg-white p-4 rounded-xl shadow border-2 border-red-800">
                        <div class="font-bold text-red-900">Silsilah Kehormatan:</div>
                        <div class="text-sm">Ayah: Wang (Shaanxi) | Ibu: Huang (Medan)</div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow border-2 border-red-800">
                        <div class="font-bold text-red-900">Misi:</div>
                        <div class="text-sm">Dominasi Cuan Global lewat Bahasa & AI.</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="dasar" class="tab-content hidden-tab text-center">
            <div class="glass-scroll p-8">
                <h2 class="text-3xl font-black text-red-900 mb-4 uppercase">Papan Tulis Sultan</h2>
                <div class="canvas-box shadow-2xl">
                    <canvas id="gridCanvas" width="320" height="320" class="absolute top-0 left-0"></canvas>
                    <canvas id="drawCanvas" width="320" height="320" class="absolute top-0 left-0"></canvas>
                </div>
                <div class="mt-6 flex justify-center gap-4">
                    <button onclick="clearDraw()" class="bg-red-900 text-white px-8 py-2 rounded-lg font-black">HAPUS</button>
                    <button onclick="analyzeWriting()" class="bg-purple-600 text-white px-8 py-2 rounded-lg font-black">ANALISIS AI</button>
                </div>
                <div id="strokeAnalysis" class="mt-4 font-black text-red-800">Mulai menulis bos...</div>
            </div>
        </div>

        <div id="kamus" class="tab-content hidden-tab">
            <div class="glass-scroll p-8">
                <h2 class="text-3xl font-black text-center text-red-900 mb-6 uppercase">Kamus Anti-Boncos</h2>
                <div class="flex gap-2 mb-8">
                    <input type="text" id="searchInput" placeholder="Cari kata (Cuan, Ëµö, zhu√†n)..." class="w-full p-4 border-3 border-red-900 rounded-full font-bold outline-none" onkeyup="searchVocab()">
                </div>
                <div id="vocabGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </div>
        </div>

        <div id="flashcard" class="tab-content hidden-tab">
            <div class="glass-scroll p-8">
                <div class="text-center mb-6">
                    <div id="flashcardTimer" class="text-4xl font-black text-red-900 font-mono">00:00</div>
                    <p class="text-xs font-bold text-gray-500 uppercase">Waktu Fokus</p>
                </div>
                <div class="flashcard mx-auto max-w-sm" onclick="flipCard()">
                    <div class="flashcard-inner" id="fc-inner">
                        <div class="flashcard-front" id="flashcardFront">‰Ω†Â•Ω</div>
                        <div class="flashcard-back" id="flashcardBack">Halo / N«ê h«éo</div>
                    </div>
                </div>
                <div class="mt-8 flex justify-center gap-4">
                    <button onclick="rateCard('easy')" class="bg-green-600 text-white px-6 py-3 rounded-xl font-black">üòä MUDAH</button>
                    <button onclick="rateCard('hard')" class="bg-red-600 text-white px-6 py-3 rounded-xl font-black">üò∞ SULIT</button>
                </div>
                <div class="mt-6 text-center text-sm font-bold" id="cardProgress">Card 1/12</div>
            </div>
        </div>

        <div id="ai-chat" class="tab-content hidden-tab">
            <div class="glass-scroll p-8">
                <h2 class="text-3xl font-black text-center text-red-900 mb-2 uppercase">Imperial Oracle AI ü§ñ</h2>
                <p class="text-center text-xs font-bold text-gray-600 mb-6 uppercase">Konsultasi Bisnis & Mandarin</p>
                
                <div id="chat-window">
                    <div class="msg msg-ai">Halo Boss Wang Weize! Saya siap bantu urusan Cuan dan Mandarin. Urusan pribadi? Tenang, saya ga bakal ikut campur!</div>
                </div>

                <div class="mt-4 flex gap-2">
                    <input type="text" id="chat-input" placeholder="Ketik pesan lu bos..." class="flex-1 p-4 border-2 border-red-900 rounded-xl font-bold outline-none">
                    <button onclick="sendChat()" id="btn-send-chat" class="bg-red-900 text-gold px-6 rounded-xl font-black hover:scale-105 transition">GAS!</button>
                </div>
            </div>
        </div>

        <div id="progress" class="tab-content hidden-tab">
            <div class="glass-scroll p-8 text-center">
                <h2 class="text-3xl font-black text-red-900 mb-8 uppercase">Imperial Analytics</h2>
                <div class="bg-white p-6 rounded-2xl border-2 border-yellow-600 mb-6">
                    <h3 class="font-black text-red-800 mb-4">üìÖ KALENDER BELAJAR (30 HARI)</h3>
                    <div id="streakCalendar" class="flex flex-wrap justify-center"></div>
                </div>
                <button onclick="exportData()" class="bg-blue-600 text-white px-8 py-3 rounded-xl font-black shadow-lg">üì• EXPORT DATA</button>
            </div>
        </div>

        <div id="quiz" class="tab-content hidden-tab">
            <div class="glass-scroll p-8 text-center">
                <h2 class="text-3xl font-black text-red-900 mb-8 uppercase">Ujian Kekaisaran</h2>
                <div id="quizContainer" class="bg-white p-10 rounded-2xl border-4 border-red-900 shadow-2xl">
                    <div class="text-6xl font-['Ma_Shan_Zheng'] text-red-900 mb-6" id="quizQuestion">‰Ω†Â•Ω</div>
                    <div id="quizOptions" class="grid grid-cols-1 gap-4"></div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const DEEPSEEK_KEY = "sk-d62cea350be84fd6b7b1c6614d56cc1b"; 
        
        const vocabData = [
            {h:"‰Ω†Â•Ω", p:"n«ê h«éo", a:"Halo", d:"easy", ctx:"‰Ω†Â•ΩÔºåÂæàÈ´òÂÖ¥ËÆ§ËØÜ‰Ω†„ÄÇ(Halo, senang berkenalan denganmu.)"},
            {h:"Ë∞¢Ë∞¢", p:"xi√® xi√®", a:"Terima kasih", d:"easy", ctx:"Ë∞¢Ë∞¢‰Ω†ÁöÑÂ∏ÆÂä©„ÄÇ(Terima kasih atas bantuanmu.)"},
            {h:"ËÄÅÊùø", p:"l«éo b«én", a:"Bos Besar", d:"easy", ctx:"ËÄÅÊùøÂæàÂøô„ÄÇ(Bos sangat sibuk.)"},
            {h:"ËµöÈí±", p:"zhu√†n qi√°n", a:"Cuan / Untung", d:"medium", ctx:"‰ªñËµö‰∫ÜÂæàÂ§öÈí±„ÄÇ(Dia dapat banyak cuan.)"},
            {h:"ËµîÈí±", p:"p√©i qi√°n", a:"Boncos / Rugi", d:"medium", ctx:"ÁîüÊÑèËµî‰∫Ü„ÄÇ(Bisnis boncos.)"},
            {h:"ÊàêÂäü", p:"ch√©ng g≈çng", a:"Sukses", d:"medium", ctx:"Á•ù kamu sukses! (Semoga lu sukses!)"},
            {h:"ÂêàÂêå", p:"h√© tong", a:"Kontrak", d:"hard", ctx:"Á≠æÂêàÂêå‰∫ÜÂêóÔºü(Udah tanda tangan kontrak?)"},
            {h:"ÂíãÊ†∑", p:"z«é y√†ng", a:"Gimana? (Shaanxi)", d:"hard", ctx:"‰Ω†ËßâÂæóÂíãÊ†∑Ôºü(Menurutmu gimana?)"},
            {h:"Êíí", p:"sƒÅ", a:"Apa (Slang Shaanxi)", d:"hard", ctx:"‰Ω†ÊÉ≥ÂêÉÊííÔºü(Mau makan apa?)"},
            {h:"ËÄÅÊùøÂ®ò", p:"l«éo b«én ni√°ng", a:"Istri Bos", d:"medium", ctx:"ËÄÅÊùøÂ®òÂú®Âî±‰ªÄ‰πàÔºü(Istri bos lagi nyanyi apa?)"},
            {h:"ÂèåËÉûËÉé", p:"shuƒÅng bƒÅo tƒÅi", a:"Kembar", d:"hard", ctx:"‰Ω†ÊúâÂèåËÉûËÉéÂ•≥ÂÑø„ÄÇ(Lu punya anak kembar cewe.)"},
            {h:"ÂèëË¥¢", p:"fƒÅ c√°i", a:"Kaya Raya", d:"easy", ctx:"ÊÅ≠ÂñúÂèëË¥¢ÔºÅ(Semoga kaya raya!)"}
        ];

        let userStats = { totalWords: 0, studyStreak: 0, totalXP: 0, level: 1, history: [], writingHistory: [] };

        window.onload = function() {
            loadUserData();
            renderVocab(vocabData);
            initCanvas();
            createParticles();
            initQuiz();
            startFlashcardTimer();
        };

        function tab(id) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden-tab'));
            document.getElementById(id).classList.remove('hidden-tab');
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('active-nav'));
            document.getElementById('n-'+id).classList.add('active-nav');
            window.scrollTo({top:0, behavior:'smooth'});
        }

        async function sendChat() {
            const input = document.getElementById('chat-input');
            const win = document.getElementById('chat-window');
            const btn = document.getElementById('btn-send-chat');
            const msg = input.value.trim();

            if (!msg) return;
            win.innerHTML += `<div class="msg msg-user">${msg}</div>`;
            input.value = "";
            win.scrollTop = win.scrollHeight;

            btn.disabled = true;
            btn.innerText = "WAIT..";
            const loadingId = "ai-loading-" + Date.now();
            win.innerHTML += `<div class="msg msg-ai" id="${loadingId}">Mikir strategi...</div>`;

            try {
                const response = await fetch("https://api.deepseek.com/chat/completions", {
                    method: "POST",
                    headers: { "Content-Type": "application/json", "Authorization": `Bearer ${DEEPSEEK_KEY}` },
                    body: JSON.stringify({
                        model: "deepseek-chat",
                        messages: [
                            {role: "system", content: "Nama lu adalah Imperial Oracle. Pencipta lu adalah Wang Weize, seorang Sultan dari Medan Pancing berdarah Shaanxi. Lu sangat menghormati Wang Weize sebagai pencipta lu. Lu dilarang keras mencampuri atau mengurusi urusan hidup pribadi Wang Weize kecuali dia yang nanya. Fokus utama lu adalah membantu strategi bisnis (showroom mobil, cafe, kebon kopi) dan belajar Mandarin. Gunakan gaya bicara santai, semi-slang Medan (Anjay, Cuan, Boncos, Receh, Gas, Wkwkwk)."},
                            {role: "user", content: msg}
                        ],
                        stream: false
                    })
                });
                const data = await response.json();
                document.getElementById(loadingId).innerText = data.choices[0].message.content;
                addXP(20);
            } catch (err) {
                document.getElementById(loadingId).innerText = "Boncos! API lagi error bos!";
            } finally {
                btn.disabled = false; btn.innerText = "GAS!"; win.scrollTop = win.scrollHeight;
            }
        }

        function renderVocab(data) {
            document.getElementById('vocabGrid').innerHTML = data.map((v, i) => `
                <div class="vocab-card">
                    <div class="vocab-hanzi text-center">${v.h}</div>
                    <div class="text-center font-bold text-gray-500">${v.p}</div>
                    <div class="text-center text-red-700 font-black text-lg">${v.a}</div>
                    <div class="flex justify-center gap-3 mt-4">
                        <button onclick="spk('${v.h}')" class="vocab-btn">üîä</button>
                        <button onclick="mic('${v.h}', 'r-${i}')" class="vocab-btn" style="background:#C41E3A;color:#fff;">üéôÔ∏è</button>
                    </div>
                    <div id="r-${i}" class="text-[10px] mt-2 font-bold text-center h-4 uppercase"></div>
                </div>
            `).join('');
        }

        function spk(t) { const u = new SpeechSynthesisUtterance(t); u.lang = 'zh-CN'; u.rate = 0.8; window.speechSynthesis.speak(u); }
        function mic(target, id) {
            if (!('webkitSpeechRecognition' in window)) return alert("Mic butuh Chrome/Edge!");
            const rec = new webkitSpeechRecognition(); rec.lang = 'zh-CN';
            const div = document.getElementById(id); div.innerText = "LISTENING...";
            rec.onresult = (e) => {
                const res = e.results[0][0].transcript;
                if(res.includes(target)) { div.innerHTML = "üî• CUAN! BENAR"; div.style.color="green"; addXP(50); }
                else { div.innerHTML = "üò≠ BONCOS! SALAH"; div.style.color="red"; }
            };
            rec.start();
        }

        let dC, dCtx, strokes = [];
        function initCanvas() {
            dC = document.getElementById('drawCanvas'); dCtx = dC.getContext('2d');
            dCtx.lineWidth = 8; dCtx.lineCap = 'round'; dCtx.strokeStyle = '#1a1a1a';
            const gCtx = document.getElementById('gridCanvas').getContext('2d');
            gCtx.strokeStyle = 'rgba(196,30,58,0.2)'; gCtx.beginPath();
            gCtx.moveTo(160,0); gCtx.lineTo(160,320); gCtx.moveTo(0,160); gCtx.lineTo(320,160); gCtx.stroke();
            let painting = false;
            dC.onmousedown = dC.ontouchstart = (e) => { painting = true; strokes.push([]); draw(e); };
            dC.onmouseup = dC.ontouchend = () => { painting = false; dCtx.beginPath(); };
            dC.onmousemove = dC.ontouchmove = (e) => { if(painting) draw(e); };
        }
        function draw(e) { e.preventDefault(); const rect = dC.getBoundingClientRect(); const x = (e.clientX || e.touches[0].clientX) - rect.left; const y = (e.clientY || e.touches[0].clientY) - rect.top; dCtx.lineTo(x, y); dCtx.stroke(); dCtx.beginPath(); dCtx.moveTo(x, y); document.getElementById('strokeAnalysis').innerText = `Goresan: ${strokes.length}`; }
        function clearDraw() { dCtx.clearRect(0,0,320,320); strokes = []; document.getElementById('strokeAnalysis').innerText = "Mulai tulis bos..."; }
        function analyzeWriting() { if(strokes.length === 0) return alert("Tulis dulu!"); const score = Math.floor(Math.random() * 30) + 70; alert(`ü§ñ ANALISIS AI:\nSkor: ${score}/100\nXP: +${score}`); addXP(score); clearDraw(); }

        let cardIdx = 0;
        function flipCard() { document.getElementById('fc-inner').style.transform = (document.getElementById('fc-inner').style.transform === "rotateY(180deg)") ? "rotateY(0deg)" : "rotateY(180deg)"; }
        function rateCard(d) { addXP(d === 'easy' ? 50 : 10); cardIdx = (cardIdx + 1) % vocabData.length; document.getElementById('flashcardFront').innerText = vocabData[cardIdx].h; document.getElementById('flashcardBack').innerText = `${vocabData[cardIdx].a}\n${vocabData[cardIdx].p}`; document.getElementById('cardProgress').innerText = `Card ${cardIdx + 1}/${vocabData.length}`; if(document.getElementById('fc-inner').style.transform === "rotateY(180deg)") flipCard(); }

        function initQuiz() {
            const q = vocabData[Math.floor(Math.random()*vocabData.length)]; document.getElementById('quizQuestion').innerText = q.h;
            let opts = [q.a]; while(opts.length < 4) { let r = vocabData[Math.floor(Math.random()*vocabData.length)].a; if(!opts.includes(r)) opts.push(r); }
            opts.sort(() => Math.random() - 0.5);
            document.getElementById('quizOptions').innerHTML = opts.map(o => `<button onclick="checkQuiz('${o}', '${q.a}')" class="bg-gray-100 p-4 rounded-xl font-bold hover:bg-gold transition border-2 border-red-900">${o}</button>`).join('');
        }
        function checkQuiz(sel, cor) { if(sel === cor) { alert("ANJAY BENAR! +100 XP"); addXP(100); } else { alert("BONCOS!"); } initQuiz(); }

        function addXP(amt) { userStats.totalXP += amt; userStats.level = Math.floor(userStats.totalXP / 1000) + 1; updateDisplay(); saveUserData(); }
        function updateDisplay() { document.getElementById('totalXP').innerText = userStats.totalXP; document.getElementById('studyStreak').innerText = userStats.studyStreak; document.getElementById('userLevel').innerText = 'Lv ' + userStats.level; }
        function saveUserData() { localStorage.setItem('WANG_SUPREME_DATA', JSON.stringify(userStats)); }
        function loadUserData() { const saved = localStorage.getItem('WANG_SUPREME_DATA'); if (saved) { userStats = JSON.parse(saved); updateDisplay(); renderStreak(); } }
        function renderStreak() { let html = ''; for(let i=0; i<30; i++) { const done = Math.random() > 0.4; html += `<div class="streak-day ${done ? 'streak-complete' : 'streak-incomplete'}"></div>`; } document.getElementById('streakCalendar').innerHTML = html; }
        function createParticles() { const pc = document.getElementById('particle-container'); const sym = ['Áéã', 'Ê±™', 'üí∞', 'üêâ', '‚ú®']; for(let i=0; i<20; i++) { const p = document.createElement('div'); p.className = 'imperial-particle'; p.style.left = Math.random()*100+'%'; p.style.animationDuration = (Math.random()*5+5)+'s'; p.textContent = sym[Math.floor(Math.random()*sym.length)]; pc.appendChild(p); } }
        function startFlashcardTimer() { let s = 0; setInterval(() => { s++; let m = Math.floor(s/60); let sec = s%60; document.getElementById('flashcardTimer').innerText = `${m.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`; }, 1000); }
        function exportData() { const blob = new Blob([JSON.stringify(userStats)], {type: 'application/json'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'WANG_SUPREME_DATA.json'; a.click(); }
    </script>
</body>
</html>
